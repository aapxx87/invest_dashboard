(()=>{"use strict";const e=[{stockTicker:"orcl",currency:"usd",buyDate:"13.12.2021",buyYear:"2021",buyPrice:102.49,volume:1,usdRubRateBuyDate:73.56,benchMark:"fxit.me",benchMarkStartPrice:12290},{stockTicker:"u",currency:"usd",buyDate:"12.11.2021",buyYear:"2021",buyPrice:187.2,volume:1,usdRubRateBuyDate:72.97,benchMark:"fxit.me",benchMarkStartPrice:12082},{stockTicker:"rblx",currency:"usd",buyDate:"03.11.2021",buyYear:"2021",buyPrice:78.72,volume:2,usdRubRateBuyDate:73.09,benchMark:"fxit.me",benchMarkStartPrice:11696},{stockTicker:"nvda",currency:"usd",buyDate:"10.07.2020",buyYear:"2020",end2020Price:130.55,buyPrice:104.35,volume:4,usdRubRateBuyDate:73,benchMark:"fxit.me",benchMarkStartPrice:7618},{stockTicker:"fb",currency:"usd",buyDate:"25.03.2020",end2020Price:273.16,buyYear:"2020",buyPrice:160.14,volume:1,usdRubRateBuyDate:80.32,benchMark:"fxit.me",benchMarkStartPrice:5857},{stockTicker:"mtch",currency:"usd",buyDate:"25.03.2020",end2020Price:151.19,buyYear:"2020",buyPrice:63.99,volume:1,usdRubRateBuyDate:66.57,benchMark:"fxit.me",benchMarkStartPrice:5857},{stockTicker:"aapl",currency:"usd",buyDate:"25.02.2020",end2020Price:132.69,buyYear:"2020",buyPrice:73.22,volume:4,usdRubRateBuyDate:67,benchMark:"fxit.me",benchMarkStartPrice:5993},{stockTicker:"tcsg.me",currency:"rub",buyDate:"10.01.2020",end2020Price:2366,buyYear:"2020",buyPrice:1370,lastPrice:6848,volume:2,usdRubRateBuyDate:66.57,benchMark:"fxit.me",benchMarkStartPrice:5638},{stockTicker:"yndx.me",currency:"rub",buyDate:"10.01.2020",end2020Price:5156,buyYear:"2020",buyPrice:2732,lastPrice:5612,volume:1,usdRubRateBuyDate:66.57,benchMark:"fxit.me",benchMarkStartPrice:5675},{stockTicker:"fxit.me",currency:"rub",buyDate:"10.01.2020",end2020Price:9609,buyYear:"2020",buyPrice:5675,lastPrice:12382,volume:1,usdRubRateBuyDate:66.57,benchMark:"fxit.me",benchMarkStartPrice:5675}],t=document.querySelector(".portfolio-balances"),r=document.querySelector(".year_2021"),c=document.querySelector(".year_2020"),n=document.querySelector(".balances-item-2020"),a=function(e){const t=e.filter((function(e){return"2020"===e.buyYear})),r=[];return t.forEach((function(e){"usd"===e.currency&&r.push(e.buyPrice*e.volume*e.usdRubRateBuyDate),r.push(e.buyPrice*e.volume)})),r.reduce((function(e,t){return e+t}))},u=function(e){const t=e.filter((function(e){return"2020"===e.buyYear})),r=[];return t.forEach((function(e){"usd"===e.currency?r.push(e.end2020Price*e.volume*e.usdRubRateBuyDate):"rub"===e.currency&&r.push(e.end2020Price*e.volume)})),r.reduce((function(e,t){return e+t}))};n.textContent=`${((u(e)-a(e))/(a(e)/100)).toFixed(1)} %`;const i=document.querySelector(".balances-item-2021");!function(){const t=u(e)+function(e){const t=e.filter((function(e){return"2021"===e.buyYear})),r=[];return t.forEach((function(e){"usd"===e.currency?r.push(e.buyPrice*e.volume*e.usdRubRateBuyDate):"rub"===e.currency&&r.push(e.buyPrice*e.volume)})),r.reduce((function(e,t){return e+t}))}(e);setTimeout((function(){const e=(Number(document.querySelector(".last-balance").textContent.slice(0,-5).replace(/\s+/g,""))-t)/(t/100);i.textContent=`${e.toFixed(1)} %`}),4e3)}(),document.querySelector(".container-portfolio-quotes");const s=[],o=[],l=["nvda","rblx","aapl","fxit.me","yndx.me","tcsg.me","mtch","fb","u","orcl","RUB=X"],b=async function(e){console.log("Start fetch API stock data");const t=await fetch(`https://yh-finance.p.rapidapi.com/market/v2/get-quotes?region=US&symbols=${e}`,{method:"GET",headers:{"x-rapidapi-host":"yh-finance.p.rapidapi.com","x-rapidapi-key":"8caa20872cmsh50a9c8ee420964ep1ae65ejsne134ec66d0a1"}}),r=await t.json();return console.log(r),r.quoteResponse.result};b(l.map((function(e){return e+"%2C"})).join("")),async function(n){document.querySelector(".container-portfolio-quotes").insertAdjacentHTML("afterbegin",'\n    <div class="spinner">\n            <svg class="loading-spinner" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">\n      <g fill="none">\n        <path id="track" fill="#C6CCD2" d="M24,48 C10.745166,48 0,37.254834 0,24 C0,10.745166 10.745166,0 24,0 C37.254834,0 48,10.745166 48,24 C48,37.254834 37.254834,48 24,48 Z M24,44 C35.045695,44 44,35.045695 44,24 C44,12.954305 35.045695,4 24,4 C12.954305,4 4,12.954305 4,24 C4,35.045695 12.954305,44 24,44 Z"/>\n        <path id="section" fill="#3F4850" d="M24,0 C37.254834,0 48,10.745166 48,24 L44,24 C44,12.954305 35.045695,4 24,4 L24,0 Z"/>\n      </g>\n    </svg>\n    <p>Loading data. Please wait.</p>\n    </div>\n  ');const a=await b(l),u=a.slice(0,-1),i=a.pop().regularMarketPrice;let m;const y=function(e){return e.filter((function(e){return"FXIT.ME"===e.symbol}))[0].regularMarketPrice}(a),d=[];["nvda","rblx","aapl","fxit.me","yndx.me","tcsg.me","mtch","fb","orcl","u"].forEach((function(t){let n;u.forEach((function(e){e.symbol===t.toUpperCase()&&(n=e.regularMarketPrice)}));const a=e.filter((function(e){return e.stockTicker===t})),l=n-a[0].buyPrice;"usd"===a[0].currency&&(s.push(+a[0].volume*n*i).toFixed(2),o.push(a[0].buyPrice*a[0].volume*a[0].usdRubRateBuyDate)),"rub"===a[0].currency&&(s.push(+(a[0].volume*n).toFixed(2)),o.push(a[0].buyPrice*a[0].volume));const b=s.reduce((function(e,t){return e+t}),0).toFixed(2),p=o.reduce((function(e,t){return e+t}),0).toFixed(2),f=(y-a[0].benchMarkStartPrice)/(a[0].benchMarkStartPrice/100),P={pnl:l,buyDate:a[0].buyDate,buyYear:a[0].buyYear,currency:a[0].currency,ticker:a[0].stockTicker.toUpperCase(),volume:a[0].volume,buyPrice:new Intl.NumberFormat("ru-RU").format(a[0].buyPrice),lastPrice:new Intl.NumberFormat("ru-RU").format(n.toFixed(2)),totalVolumePrice:new Intl.NumberFormat("ru-RU").format((a[0].volume*n).toFixed(2)),deltaMoney:new Intl.NumberFormat("ru-RU").format((l*a[0].volume).toFixed(2)),deltaPercent:((n-a[0].buyPrice)/(a[0].buyPrice/100)).toFixed(2),benchMarkDeltaPercent:f.toFixed(0),benchMarkName:"FXIT.ME"};d.push(P),m={startAmount:new Intl.NumberFormat("ru-RU").format(p),lastAmount:new Intl.NumberFormat("ru-RU").format(b),totalDelta:new Intl.NumberFormat("ru-RU").format(b-p),totalDeltaPercent:((b-p)/(p/100)).toFixed(0)},document.querySelector(".spinner").style.display="none",function(e){let t;"2020"===e.buyYear&&(t=`\n         <li class="item-row row-investments ${e.pnl>0?"profit":"loss"}">\n          <p class="balances-item2 ticker">${e.ticker}</p>\n          <p class="balances-item">${e.deltaPercent} %</p>\n          <p class="balances-item2">${e.benchMarkDeltaPercent} %</p>\n          <p class="balances-item">${e.lastPrice} $</p>\n          <p class="balances-item2 small-number">${e.buyPrice} $</p>\n          <p class="balances-item2 small-number">${e.buyDate}</p>\n          <p class="balances-item2 small-number">${e.volume}</p>\n          <p class="balances-item2 small-number">${e.totalVolumePrice}</p>\n         </li>\n        `,c.insertAdjacentHTML("beforeend",t)),"2021"===e.buyYear&&(t=`\n         <li class="item-row row-investments ${e.pnl>0?"profit":"loss"}">\n          <p class="balances-item2 ticker">${e.ticker}</p>\n          <p class="balances-item">${e.deltaPercent} %</p>\n          <p class="balances-item2">${e.benchMarkDeltaPercent} %</p>\n          <p class="balances-item">${e.lastPrice} $</p>\n          <p class="balances-item2 small-number">${e.buyPrice} $</p>\n          <p class="balances-item2 small-number">${e.buyDate}</p>\n          <p class="balances-item2 small-number">${e.volume}</p>\n          <p class="balances-item2 small-number">${e.totalVolumePrice}</p>\n         </li>\n        `,r.insertAdjacentHTML("beforeend",t))}(P)})),function(e){const r=`\n       \n           <li class="item-row">\n            <p class="balances-item last-balance">${e.lastAmount} P</p>\n            <p class="balances-item">${e.startAmount} P</p>\n            <p class="balances-item">${e.totalDeltaPercent} %</p>\n            <p class="balances-item">${e.totalDelta} P</p>\n          </li>\n  `;t.insertAdjacentHTML("beforeend",r)}(m)}()})();