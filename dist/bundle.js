(()=>{"use strict";const e=[{stockTicker:"u",currency:"usd",buyDate:"12.11.2021",buyPrice:187.2,volume:1,usdRubRateBuyDate:72.97,benchMark:"fxit.me",benchMarkStartPrice:12082},{stockTicker:"rblx",currency:"usd",buyDate:"03.11.2021",buyPrice:78.72,volume:2,usdRubRateBuyDate:73.09,benchMark:"fxit.me",benchMarkStartPrice:11696},{stockTicker:"nvda",currency:"usd",buyDate:"10.07.2020",buyPrice:104.35,volume:4,usdRubRateBuyDate:73,benchMark:"fxit.me",benchMarkStartPrice:7618},{stockTicker:"fb",currency:"usd",buyDate:"25.03.2020",buyPrice:160.14,volume:1,usdRubRateBuyDate:80.32,benchMark:"fxit.me",benchMarkStartPrice:5857},{stockTicker:"mtch",currency:"usd",buyDate:"25.03.2020",buyPrice:63.99,volume:1,usdRubRateBuyDate:66.57,benchMark:"fxit.me",benchMarkStartPrice:5857},{stockTicker:"aapl",currency:"usd",buyDate:"25.02.2020",buyPrice:73.22,volume:4,usdRubRateBuyDate:67,benchMark:"fxit.me",benchMarkStartPrice:5993},{stockTicker:"tcsg.me",currency:"rub",buyDate:"10.01.2020",buyPrice:1370,lastPrice:6848,volume:2,usdRubRateBuyDate:66.57,benchMark:"fxit.me",benchMarkStartPrice:5638},{stockTicker:"yndx.me",currency:"rub",buyDate:"10.01.2020",buyPrice:2732,lastPrice:5612,volume:1,usdRubRateBuyDate:66.57,benchMark:"fxit.me",benchMarkStartPrice:5675},{stockTicker:"fxit.me",currency:"rub",buyDate:"10.01.2020",buyPrice:5675,lastPrice:12382,volume:1,usdRubRateBuyDate:66.57,benchMark:"fxit.me",benchMarkStartPrice:5675},{stockTicker:"orcl",currency:"usd",buyDate:"13.12.2021",buyPrice:102.49,volume:1,usdRubRateBuyDate:73.56,benchMark:"fxit.me",benchMarkStartPrice:12290}],t=document.querySelector(".quote-ul"),r=document.querySelector(".total-balances"),c=(document.querySelector(".container-portfolio-quotes"),[]),a=[],n=["nvda","rblx","aapl","fxit.me","yndx.me","tcsg.me","mtch","fb","u","orcl","RUB=X"],u=async function(e){console.log("Start fetch API stock data");const t=await fetch(`https://yh-finance.p.rapidapi.com/market/v2/get-quotes?region=US&symbols=${e}`,{method:"GET",headers:{"x-rapidapi-host":"yh-finance.p.rapidapi.com","x-rapidapi-key":"8caa20872cmsh50a9c8ee420964ep1ae65ejsne134ec66d0a1"}});return(await t.json()).quoteResponse.result};u(n.map((function(e){return e+"%2C"})).join("")),async function(o){document.querySelector(".container-portfolio-quotes").insertAdjacentHTML("afterbegin",'\n    <div class="spinner">\n            <svg class="loading-spinner" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">\n      <g fill="none">\n        <path id="track" fill="#C6CCD2" d="M24,48 C10.745166,48 0,37.254834 0,24 C0,10.745166 10.745166,0 24,0 C37.254834,0 48,10.745166 48,24 C48,37.254834 37.254834,48 24,48 Z M24,44 C35.045695,44 44,35.045695 44,24 C44,12.954305 35.045695,4 24,4 C12.954305,4 4,12.954305 4,24 C4,35.045695 12.954305,44 24,44 Z"/>\n        <path id="section" fill="#3F4850" d="M24,0 C37.254834,0 48,10.745166 48,24 L44,24 C44,12.954305 35.045695,4 24,4 L24,0 Z"/>\n      </g>\n    </svg>\n    <p>Loading data. Please wait.</p>\n    </div>\n  ');const i=await u(n),s=i.slice(0,-1),l=i.pop().regularMarketPrice;let b;const m=function(e){return e.filter((function(e){return"FXIT.ME"===e.symbol}))[0].regularMarketPrice}(i);["nvda","rblx","aapl","fxit.me","yndx.me","tcsg.me","mtch","fb","orcl","u"].forEach((function(r){let n;s.forEach((function(e){e.symbol===r.toUpperCase()&&(n=e.regularMarketPrice)}));const u=e.filter((function(e){return e.stockTicker===r})),o=n-u[0].buyPrice;"usd"===u[0].currency&&(c.push(+u[0].volume*n*l).toFixed(2),a.push(u[0].buyPrice*u[0].volume*u[0].usdRubRateBuyDate)),"rub"===u[0].currency&&(c.push(+(u[0].volume*n).toFixed(2)),a.push(u[0].buyPrice*u[0].volume));const i=c.reduce((function(e,t){return e+t}),0).toFixed(2),d=a.reduce((function(e,t){return e+t}),0).toFixed(2),y=(m-u[0].benchMarkStartPrice)/(u[0].benchMarkStartPrice/100),p={pnl:o,currency:u[0].currency,ticker:u[0].stockTicker.toUpperCase(),volume:u[0].volume,buyPrice:new Intl.NumberFormat("ru-RU").format(u[0].buyPrice),lastPrice:new Intl.NumberFormat("ru-RU").format(n.toFixed(2)),totalVolumePrice:new Intl.NumberFormat("ru-RU").format((u[0].volume*n).toFixed(2)),deltaMoney:new Intl.NumberFormat("ru-RU").format((o*u[0].volume).toFixed(2)),deltaPercent:((n-u[0].buyPrice)/(u[0].buyPrice/100)).toFixed(2),benchMarkDeltaPercent:y.toFixed(0),benchMarkName:"FXIT.ME"};b={startAmount:new Intl.NumberFormat("ru-RU").format(d),lastAmount:new Intl.NumberFormat("ru-RU").format(i),totalDelta:new Intl.NumberFormat("ru-RU").format(i-d),totalDeltaPercent:((i-d)/(d/100)).toFixed(0)},document.querySelector(".spinner").style.display="none",function(e){const r=`\n          <li>\n          <div class="quote-box ${e.pnl>0?"profit":"loss"}">\n            <div class="stock-data">\n              <p class="stock-name">${e.ticker} <span>(${e.volume} шт.)</span></p>\n              <p class="stock-amount">${e.buyPrice} ${"usd"===e.currency?"$":"Р"} -> <span>${e.lastPrice} ${"usd"===e.currency?"$":"Р"}</span> </p>\n              <p class="bmName">${e.benchMarkName}</p>\n            </div>\n            <div class="stock-price">\n              <p class="stock-total-sum-price">${e.totalVolumePrice} ${"usd"===e.currency?"$":"Р"}</p>\n              <p class="stock-price-delta">${e.deltaMoney} ${"usd"===e.currency?"$":"Р"} <span>(${e.deltaPercent}%)</span></p>\n              <p class="bm-delta-percent">${e.benchMarkDeltaPercent} %</p>\n            </div>\n          </div>\n        </li>\n      `;t.insertAdjacentHTML("beforeend",r)}(p)})),function(e){const t=`\n        <div class="start-current-balance">\n          <p class="totalSumStart">${e.startAmount}</p> &#8594 <p class="totalSumLast">${e.lastAmount}</p>\n        </div>\n        <div class="pnl-box">\n          <p class="pnl-total">${e.totalDelta}</p>\n          <p class="pnl-percent">(${e.totalDeltaPercent}%)</p>\n        </div>\n  `;r.insertAdjacentHTML("beforeend",t)}(b)}()})();